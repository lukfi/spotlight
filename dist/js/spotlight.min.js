/**
 * Spotlight.js v0.7.8
 * Copyright 2019-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b,c){a.classList[c?"add":"remove"](b)}function g(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){b&&(g(a,"transition","none"),b());aa||(aa=a.clientTop&&0);b&&g(a,"transition","")}function h(a,b,c,e){k(!0,a,b,c,e)}function k(a,b,c,e,f){b[(a?"add":"remove")+"EventListener"](c,e,f||!1===f?f:!0)}function ca(a,b){a.stopPropagation();b&&a.preventDefault()}function l(a,b){g(a,"display",b?"":"none")}
function m(a,b){g(a,"visibility",b?"":"hidden")}function n(a,b){g(a,"transition",b?"":"none")};var p="info theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),da={info:1,page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1};var ea={},fa=document.createElement("video");function ha(a,b,c,e){if("node"!==e)for(var f=Object.keys(c),A=0,x;A<f.length;A++)if(x=f[A],3<x.length&&0===x.indexOf("src"))if("video"===e){var J=ea[x];if(J){if(0<J){var Ka=c[x];break}}else if(fa.canPlayType("video/"+x.substring(3).replace("-","").toLowerCase())){ea[x]=1;Ka=c[x];break}else ea[x]=-1}else if(J=parseInt(x.substring(4),10))if(J=Math.abs(b-J),!jb||J<jb){var jb=J;Ka=c[x]}return Ka||c.src||c.href||a.src||a.href};var q=document.createElement("div");q.id="spotlight";q.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";var r={},ia=navigator.connection,ja=window.devicePixelRatio||1,t,u,ka,la,v,ma,na,oa,w,pa=0,qa=0,ra=0,sa=0,ta,ua,va,y,z,B,C,D,E,wa,xa,F,ya,za,Aa,Ba,Ca,Da,G,Ea,Fa,Ga,Ha,H,Ia,Ja,La,Ma,I,K,L,Na,M,Oa=document.createElement("img"),Pa,Qa,N,Ra=0,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,O,$a,P,Q,R,S,ab,T,bb;h(document,"click",cb);
function db(){function a(c){return r[c]=(q||document).getElementsByClassName("spl-"+c)[0]}if(!K){K=document.body;Pa=a("scene");Qa=a("header");N=a("footer");Sa=a("title");Ta=a("description");Ua=a("button");Va=a("prev");Wa=a("next");Ya=a("page");O=a("progress");$a=a("spinner");Na=[a("pane")];U("close",eb);K[T="requestFullscreen"]||K[T="msRequestFullscreen"]||K[T="webkitRequestFullscreen"]||K[T="mozRequestFullscreen"]||(T="");T?(bb=T.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Xa=U("fullscreen",fb)):p.pop();U("info",gb);U("autofit",V);U("zoom-in",hb);U("zoom-out",ib);U("theme",kb);Za=U("play",W);U("download",lb);h(Va,"click",mb);h(Wa,"click",nb);var b=a("track");h(b,"mousedown",ob);h(b,"mousemove",pb);h(b,"mouseleave",qb);h(b,"mouseup",qb);h(b,"touchstart",ob,{passive:!1});h(b,"touchmove",pb,{passive:!0});h(b,"touchend",qb);h(Ua,"click",function(){Ha?Ha(B,E):Ga&&(location.href=Ga)})}}
function U(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);Qa.appendChild(c);return r[a]=c}function cb(a){var b=a.target.closest(".spotlight");if(b){ca(a,!0);a=b.closest(".spotlight-group");D=(a||document).getElementsByClassName("spotlight");for(var c=0;c<D.length;c++)if(D[c]===b){xa=a&&a.dataset;rb(c+1);break}}}
function rb(a){if(C=D.length){K||db();za&&za(a);for(var b=Na[0],c=b.parentNode,e=Na.length;e<C;e++){var f=b.cloneNode(!1);g(f,"left",100*e+"%");c.appendChild(f);Na[e]=f}L||(K.appendChild(q),sb());B=a||1;n(Pa);tb(!0);T&&l(Xa,0<screen.availHeight-window.innerHeight);history.pushState({spl:1},"");history.pushState({spl:2},"");n(q,!0);d(K,"hide-scrollbars",!0);d(q,"show",!0);ub(!0);sb();X();G&&W(!0,!0)}}function Y(a,b){a=E[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function vb(a){a?ba(M,vb):(n(Pa,Ma),g(M,"opacity",La?0:1),g(M,"transform","translate(-50%, -50%) scale("+(Ja&&.8||w)+")"),I&&d(M,I,!0))}
function wb(a){L=Na[a-1];M=L.firstChild;B=a;if(M)y&&V(),Ca&&d(M,Ca,!0),vb(!0),I&&d(M,I),La&&g(M,"opacity",1),Ja&&g(M,"transform",""),g(M,"visibility","visible"),Q&&(Oa.src=Q),G&&xb(R);else{var b=P.media,c=Y("spinner",!0);if("video"===b)yb(c,!0),M=document.createElement("video"),M.onloadedmetadata=function(){M===this&&(M.onerror=null,M.width=M.videoWidth,M.height=M.videoHeight,zb(),yb(c),wb(a))},M.poster=E.poster,M.preload=Fa?"auto":"metadata",M.controls=Y("controls",!0),M.autoplay=E.autoplay,M.h=
Y("inline"),M.muted=Y("muted"),M.src=P.src,L.appendChild(M);else{if("node"===b){M=P.src;"string"===typeof M&&(M=document.querySelector(M));M&&(M.g||(M.g=M.parentNode),zb(),L.appendChild(M),wb(a));return}yb(c,!0);M=document.createElement("img");M.onload=function(){M===this&&(M.onerror=null,yb(c),wb(a),zb())};M.src=P.src;L.appendChild(M)}M&&(c||g(M,"visibility","visible"),M.onerror=function(){M===this&&(Ab(M),d($a,"error",!0),yb(c))})}}function yb(a,b){a&&d($a,"spin",b)}
function Bb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function Cb(){sb();M&&zb();if(T){var a=Bb();d(Xa,"on",a);a||l(Xa,0<screen.availHeight-window.innerHeight)}}function sb(){v=q.clientWidth;ma=q.clientHeight}function zb(){na=M.clientWidth;oa=M.clientHeight}function Z(a,b){g(L,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function Db(a,b,c){b?ba(Pa,function(){Db(a,!1,c)}):g(Pa,"transform","translateX("+(100*-a+(c||0))+"%)")}function ub(a){k(a,window,"keydown",Eb);k(a,window,"wheel",Fb);k(a,window,"resize",Cb);k(a,window,"popstate",Gb)}function Gb(a){L&&a.state.spl&&eb(!0)}
function Eb(a){if(L){var b=!1!==E["zoom-in"];switch(a.keyCode){case 8:b&&V();break;case 27:eb();break;case 32:G&&W();break;case 37:mb();break;case 39:nb();break;case 38:case 107:case 187:b&&hb();break;case 40:case 109:case 189:b&&ib();break;case 73:gb()}}}function Fb(a){L&&!1!==E["zoom-in"]&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?ib():hb())}function W(a,b){("boolean"===typeof a?a:!R)===!R&&(R=R?clearTimeout(R):1,d(Za,"on",R),b||xb(R))}
function xb(a){ya&&(ba(O,function(){g(O,"transition-duration","");g(O,"transform","")}),a&&(g(O,"transition-duration",Ia+"s"),g(O,"transform","translateX(0)")));a&&(R=setTimeout(nb,1E3*Ia))}function X(){Da&&(ab=Date.now()+2950,S||(d(q,"menu",!0),Hb(3E3)))}function Hb(a){S=setTimeout(function(){var b=Date.now();b>=ab?(d(q,"menu"),S=0):Hb(ab-b)},a)}function Ib(a){"boolean"===typeof a&&(S=a?S:0);S?(S=clearTimeout(S),d(q,"menu")):X()}
function ob(a){ca(a,!0);ta=!0;ua=!1;var b=a.touches;if(b){if(2===b.length){pa=Math.hypot(b[0].pageX-b[1].pageX,b[0].pageY-b[1].pageY);return}b=b[0];var c=Date.now(),e=b.pageX,f=b.pageY;if(300>c-qa&&30>Math.abs(e-ra)&&30>Math.abs(f-sa)){1<w?V():hb();qa=0;ta=!1;return}qa=c;ra=e;sa=f}va=na*w<=v;ka=a.pageX||b.pageX;la=a.pageY||b.pageY;n(L);g(L,"transition","");g(M,"transition","")}
function qb(a){ca(a);if(ta){pa=0;if(ua){if(va&&ua){var b=(a=t<-(v/7)&&(B<C||F))||t>v/7&&(1<B||F);if(a||b)Db(B-1,!0,t/v*100),a&&nb()||b&&mb();t=0;Z()}n(L,!0)}else Ib();ta=!1}}
function pb(a){ca(a);if(ta){var b=a.touches;if(b){if(2===b.length&&!1!==E["zoom-in"]){var c=Math.hypot(b[0].pageX-b[1].pageX,b[0].pageY-b[1].pageY);if(0<pa&&(b=c/pa,.05<Math.abs(b-1))){a=w*b;1.1>a&&1>b&&(a=1,u=t=0);if(1<=a&&50>=a){y&&V();if(1<a){t*=b;u*=b;b=Math.max(0,(na*a-v)/2);var e=Math.max(0,(oa*a-ma)/2);t=Math.min(Math.max(t,1.05*-b),1.05*b);u=Math.min(Math.max(u,1.05*-e),1.05*e)}w=a;g(L,"transition","transform 0.3s ease-out");g(M,"transition","transform 0.3s ease-out");Z(t,u);g(M,"transform",
"translate(-50%, -50%) scale("+w+")")}pa=c}return}b=b[0]}var f=Math.max(1,.15*w);c=(na*w-v)/2;e=(ka-(b?b.pageX:a.pageX))*f;f*=la-(b?b.pageY:a.pageY);ka=b?b.pageX:a.pageX;la=b?b.pageY:a.pageY;va?t-=e:(a=t-e,b=u-f,t=Math.abs(a)>c?0<a?c+.5*(a-c):-c+.5*(a+c):a,oa*w>ma&&(c=(oa*w-ma)/2,u=Math.abs(b)>c?0<b?c+.5*(b-c):-c+.5*(b+c):b));ua=!0;g(L,"transition","none");Z(t,u)}else X()}function fb(a){var b=Bb();if("boolean"!==typeof a||a!==!!b)if(b)document[bb]();else q[T]()}
function kb(a){"string"!==typeof a&&(a=z?"":Ea||"white");z!==a&&(z&&d(q,z),a&&d(q,a,!0),z=a)}function V(a){"boolean"===typeof a&&(y=!a);y=1===w&&!y;d(M,"autofit",y);g(M,"transform","");w=1;u=t=0;zb();n(L);Z()}function hb(){var a=w/.7;50>=a&&(y&&V(),g(L,"transition","transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"),g(M,"transition","transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"),w=a,Z(t,u),g(M,"transform","translate(-50%, -50%) scale("+w+")"))}
function ib(){var a=.85*w;1<=a&&(y&&V(),1.5>w&&(a=1,u=t=0),g(L,"transition","transform 0.4s cubic-bezier(0.4, 0.0, 0.2, 1)"),g(M,"transition","transform 0.4s cubic-bezier(0.4, 0.0, 0.2, 1)"),w=a,Z(t,u),g(M,"transform","translate(-50%, -50%) scale("+w+")"))}function gb(){Ra=!Ra;m(N,Ra)}function lb(){var a=K,b=document.createElement("a"),c=M.src;b.href=c;b.download=c.substring(c.lastIndexOf("/")+1);a.appendChild(b);b.click();a.removeChild(b)}
function eb(a){setTimeout(function(){K.removeChild(q);L=M=P=E=xa=D=za=Aa=Ba=Ha=null},200);d(K,"hide-scrollbars");d(q,"show");fb(!1);ub();history.go(!0===a?-1:-2);Q&&(Oa.src="");R&&W();M&&Ab(M);S&&(S=clearTimeout(S));z&&kb();H&&d(q,H);Ba&&Ba()}function Ab(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a);a.src=a.onerror=""}}function mb(a){a&&X();if(1<C){if(1<B)return Jb(B-1);if(F)return Db(C,!0),Jb(C)}}
function nb(a){a&&X();if(1<C){if(B<C)return Jb(B+1);if(F)return Db(-1,!0),Jb(1);R&&W()}}function Jb(a){if(a!==B){R?(clearTimeout(R),xb()):X();var b=a>B;B=a;tb(b);return!0}}
function Kb(a){var b=D[B-1],c=b;E={};xa&&Object.assign(E,xa);Object.assign(E,c.dataset||c);wa=E.media;Ha=E.onclick;Ea=E.theme;H=E["class"];Da=Y("autohide",!0);F=Y("infinite");ya=Y("progress",!0);G=Y("autoslide");Fa=Y("preload",!0);Ga=E.buttonHref;Ia=G&&parseFloat(G)||7;z||Ea&&kb(Ea);H&&d(q,H,!0);H&&ba(q);if(c=E.control){c="string"===typeof c?c.split(","):c;for(var e=0;e<p.length;e++)E[p[e]]=!1;for(e=0;e<c.length;e++){var f=c[e].trim();"zoom"===f?E["zoom-in"]=E["zoom-out"]=!0:E[f]=!0}}c=E.animation;
Ja=La=Ma=!c;I=!1;if(c)for(c="string"===typeof c?c.split(","):c,e=0;e<c.length;e++)f=c[e].trim(),"scale"===f?Ja=!0:"fade"===f?La=!0:"slide"===f?Ma=!0:f&&(I=f);Ca=E.fit;e=ia&&ia.downlink;c=Math.max(ma,v)*ja;e&&1200*e<c&&(c=1200*e);var A;P={media:wa,src:ha(b,c,E,wa),title:Y("title",b.alt||b.title||(A=b.firstElementChild)&&(A.alt||A.title))};Q&&(Oa.src=Q="");Fa&&a&&(b=D[B])&&(a=b.dataset||b,(A=a.media)&&"image"!==A||(Q=ha(b,c,a,A)));for(b=0;b<p.length;b++)a=p[b],l(r[a],Y(a,da[a]))}
function tb(a){u=t=0;w=1;if(M)if(M.onerror)Ab(M);else{var b=M;setTimeout(function(){b&&M!==b&&(Ab(b),b=null)},650);vb();Z()}N&&m(N,0);Kb(a);Db(B-1);d($a,"error");wb(B);n(L);Z();a=P.title;var c=Y("description"),e=Y("button"),f=a||c||e;f&&(a&&(Sa.firstChild.nodeValue=a),c&&(Ta.firstChild.nodeValue=c),e&&(Ua.firstChild.nodeValue=e),l(Sa,a),l(Ta,c),l(Ua,e),g(N,"transform","all"===Da?"":"none"));Da||d(q,"menu",!0);m(N,Ra&&f);m(Va,F||1<B);m(Wa,F||B<C);Ya.firstChild.nodeValue=1<C?B+" / "+C:"";Aa&&Aa(B,E)}
;window.Spotlight={init:db,theme:kb,fullscreen:fb,download:lb,autofit:V,next:nb,prev:mb,goto:Jb,close:eb,zoom:function(a){w=a||1;g(M,"transform","translate(-50%, -50%) scale("+w+")")},menu:Ib,show:function(a,b,c){D=a;b&&(xa=b,za=b.onshow,Aa=b.onchange,Ba=b.onclose,c=c||b.index);rb(c)},play:W,addControl:U,removeControl:function(a){var b=r[a];b&&(Qa.removeChild(b),r[a]=null)}};}).call(this);
